{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\USER\\\\Desktop\\\\servix-cmms\\\\frontend\\\\src\\\\components\\\\reports\\\\GenerateReportModal.js\",\n  _s = $RefreshSig$();\n// frontend/src/components/reports/GenerateReportModal.js\nimport React, { useMemo, useState } from \"react\";\nimport { X, Download, Mail, Calendar, Loader2, Settings, BarChart3, FileText } from \"lucide-react\";\nimport api from \"../../utils/api\"; // your axios instance (JWT is injected)\n\n// ------------------------------------\n// Lists / Options\n// ------------------------------------\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst REPORT_TYPES = [{\n  key: \"equipmentStatus\",\n  label: \"Equipment Status Report\"\n}, {\n  key: \"taskManagement\",\n  label: \"Task Management Report\"\n}, {\n  key: \"preventiveVsCorrective\",\n  label: \"Preventive vs Corrective Maintenance Report\"\n}, {\n  key: \"staffPerformance\",\n  label: \"Engineer & Technician Performance Report\"\n}, {\n  key: \"inventorySpareParts\",\n  label: \"Spare Parts & Inventory Report\"\n}, {\n  key: \"downtimeAnalysis\",\n  label: \"Downtime Analysis Report\"\n}, {\n  key: \"financialCost\",\n  label: \"Financial/Cost Report\"\n}, {\n  key: \"complianceAudit\",\n  label: \"Compliance & Audit Report\"\n}];\nconst DEPARTMENTS = [\"ICU\", \"Theatre\", \"Radiology\", \"Physiotherapy\", \"Laboratory\", \"OPD\", \"Maternity\", \"ENT\", \"Dental\", \"Eye\"];\nconst EQUIPMENT_CATEGORIES = [\"Ventilator\", \"Defibrillator\", \"Monitor\", \"Infusion Pump\", \"Suction\", \"Autoclave\", \"X-Ray\", \"Ultrasound\"];\nconst FORMATS = [{\n  key: \"pdf\",\n  label: \"PDF (with charts)\"\n}, {\n  key: \"xlsx\",\n  label: \"Excel (editable)\"\n}, {\n  key: \"docx\",\n  label: \"Word (narrative)\"\n} // server returns PDF for docx placeholder if not implemented\n];\n\n// ------------------------------------\n// Small toggle component\n// ------------------------------------\nfunction Toggle({\n  checked,\n  onChange,\n  id\n}) {\n  return /*#__PURE__*/_jsxDEV(\"button\", {\n    type: \"button\",\n    \"aria-pressed\": checked,\n    onClick: () => onChange(!checked),\n    className: `relative inline-flex h-6 w-11 items-center rounded-full transition ${checked ? \"bg-indigo-600\" : \"bg-gray-300\"}`,\n    id: id,\n    children: /*#__PURE__*/_jsxDEV(\"span\", {\n      className: `inline-block h-4 w-4 transform rounded-full bg-white transition ${checked ? \"translate-x-6\" : \"translate-x-1\"}`\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 5\n  }, this);\n}\n\n// ------------------------------------\n// Main modal\n// ------------------------------------\n_c = Toggle;\nexport default function GenerateReportModal({\n  open,\n  onClose\n}) {\n  _s();\n  const today = useMemo(() => new Date().toISOString().slice(0, 10), []);\n\n  // ----- Form State -----\n  const [selectedReports, setSelectedReports] = useState([]);\n  const [dateFrom, setDateFrom] = useState(today);\n  const [dateTo, setDateTo] = useState(today);\n  const [departments, setDepartments] = useState([]);\n  const [categories, setCategories] = useState([]);\n  const [staff, setStaff] = useState(\"\");\n  const [format, setFormat] = useState(\"pdf\");\n  const [includeCharts, setIncludeCharts] = useState(true);\n  const [includeSummary, setIncludeSummary] = useState(true);\n  const [interactiveExport, setInteractiveExport] = useState(false);\n  const [trendPrediction, setTrendPrediction] = useState(false);\n  const [heatMaps, setHeatMaps] = useState(false);\n  const [scheduleEnabled, setScheduleEnabled] = useState(false);\n  const [scheduleFreq, setScheduleFreq] = useState(\"monthly\");\n  const [deliveryNow, setDeliveryNow] = useState(true);\n  const [deliveryEmail, setDeliveryEmail] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(\"\");\n  const [successMsg, setSuccessMsg] = useState(\"\");\n  const reset = () => {\n    setSelectedReports([]);\n    setDateFrom(today);\n    setDateTo(today);\n    setDepartments([]);\n    setCategories([]);\n    setStaff(\"\");\n    setFormat(\"pdf\");\n    setIncludeCharts(true);\n    setIncludeSummary(true);\n    setInteractiveExport(false);\n    setTrendPrediction(false);\n    setHeatMaps(false);\n    setScheduleEnabled(false);\n    setScheduleFreq(\"monthly\");\n    setDeliveryNow(true);\n    setDeliveryEmail(\"\");\n    setLoading(false);\n    setError(\"\");\n    setSuccessMsg(\"\");\n  };\n  const toggleInArray = (value, arr, setter) => {\n    if (arr.includes(value)) setter(arr.filter(v => v !== value));else setter([...arr, value]);\n  };\n\n  // ------------------------------------\n  // Generate handler\n  // ------------------------------------\n  const handleGenerate = async () => {\n    setError(\"\");\n    setSuccessMsg(\"\");\n    if (selectedReports.length === 0) {\n      setError(\"Select at least one report type.\");\n      return;\n    }\n    if (new Date(dateFrom) > new Date(dateTo)) {\n      setError(\"Start date cannot be after end date.\");\n      return;\n    }\n    if (!deliveryNow && !deliveryEmail && !scheduleEnabled) {\n      setError(\"Choose ‘Download Now’, or provide an email, or enable Schedule.\");\n      return;\n    }\n    const payload = {\n      reports: selectedReports,\n      filters: {\n        dateFrom,\n        dateTo,\n        departments,\n        categories,\n        staff: staff || undefined\n      },\n      options: {\n        format,\n        // pdf | xlsx | docx\n        visuals: {\n          charts: includeCharts,\n          summary: includeSummary\n        },\n        advanced: {\n          interactiveExport,\n          trendPrediction,\n          heatMaps\n        },\n        schedule: scheduleEnabled ? {\n          enabled: true,\n          frequency: scheduleFreq\n        } : {\n          enabled: false\n        },\n        delivery: {\n          downloadNow: deliveryNow,\n          email: deliveryEmail || undefined\n        }\n      }\n    };\n    try {\n      setLoading(true);\n\n      // Ask backend to STREAM the file so the browser download starts immediately\n      const response = await api.post(\"/reports/generate\", payload, {\n        responseType: \"blob\",\n        headers: {\n          \"x-return-blob\": \"1\"\n        }\n      });\n      const contentType = response.headers[\"content-type\"];\n\n      // Some proxies set application/octet-stream; treat any non-JSON as file\n      const isJson = contentType && contentType.toLowerCase().includes(\"application/json\");\n      if (isJson) {\n        // Convert the blob to text then JSON\n        const text = await response.data.text();\n        const json = JSON.parse(text);\n        if (json !== null && json !== void 0 && json.fileUrl) {\n          window.open(json.fileUrl, \"_blank\");\n          setSuccessMsg(\"Report is ready. Opened download link in a new tab.\");\n        } else {\n          setError((json === null || json === void 0 ? void 0 : json.message) || \"Unexpected server response.\");\n        }\n      } else {\n        // Blob path — save file\n        const blob = response.data;\n        const url = window.URL.createObjectURL(blob);\n        const a = document.createElement(\"a\");\n        const ext = format === \"xlsx\" ? \"xlsx\" : format === \"docx\" ? \"docx\" : \"pdf\";\n        a.href = url;\n        a.download = `cmms-report-${Date.now()}.${ext}`;\n        document.body.appendChild(a);\n        a.click();\n        a.remove();\n        window.URL.revokeObjectURL(url);\n        setSuccessMsg(\"Report downloaded successfully.\");\n      }\n      if (scheduleEnabled || !deliveryNow && deliveryEmail) {\n        setSuccessMsg(prev => `${prev} Scheduled / email delivery configured.`);\n      }\n    } catch (err) {\n      try {\n        var _err$response, _err$response$data, _err$response$data$te, _err$response2, _err$response2$data;\n        const text = await (err === null || err === void 0 ? void 0 : (_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : (_err$response$data$te = _err$response$data.text) === null || _err$response$data$te === void 0 ? void 0 : _err$response$data$te.call(_err$response$data));\n        const json = text ? JSON.parse(text) : null;\n        setError((json === null || json === void 0 ? void 0 : json.message) || (err === null || err === void 0 ? void 0 : (_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.message) || err.message || \"Failed to generate report.\");\n      } catch (_) {\n        var _err$response3, _err$response3$data;\n        setError((err === null || err === void 0 ? void 0 : (_err$response3 = err.response) === null || _err$response3 === void 0 ? void 0 : (_err$response3$data = _err$response3.data) === null || _err$response3$data === void 0 ? void 0 : _err$response3$data.message) || err.message || \"Failed to generate report.\");\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n  if (!open) return null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"fixed inset-0 z-50 flex items-center justify-center\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"absolute inset-0 bg-black/40\",\n      onClick: onClose\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"relative w-full max-w-4xl rounded-2xl bg-white shadow-2xl ring-1 ring-black/5\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between border-b p-5\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center gap-2\",\n          children: [/*#__PURE__*/_jsxDEV(FileText, {\n            className: \"h-5 w-5\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 246,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-lg font-semibold\",\n            children: \"Generate Report\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 247,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            reset();\n            onClose === null || onClose === void 0 ? void 0 : onClose();\n          },\n          className: \"rounded-full p-2 hover:bg-gray-100\",\n          \"aria-label\": \"Close\",\n          children: /*#__PURE__*/_jsxDEV(X, {\n            className: \"h-5 w-5\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 257,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 249,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"max-h-[75vh] overflow-y-auto p-5\",\n        children: [/*#__PURE__*/_jsxDEV(\"section\", {\n          className: \"mb-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"mb-2 text-sm font-medium text-gray-700\",\n            children: \"Report Types\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 265,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-1 gap-2 sm:grid-cols-2\",\n            children: REPORT_TYPES.map(r => /*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"flex cursor-pointer items-center gap-3 rounded-xl border p-3 hover:bg-gray-50\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"checkbox\",\n                checked: selectedReports.includes(r.key),\n                onChange: () => toggleInArray(r.key, selectedReports, setSelectedReports),\n                className: \"h-4 w-4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 272,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: r.label\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 280,\n                columnNumber: 19\n              }, this)]\n            }, r.key, true, {\n              fileName: _jsxFileName,\n              lineNumber: 268,\n              columnNumber: 17\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 266,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 264,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n          className: \"mb-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"mb-2 text-sm font-medium text-gray-700\",\n            children: \"Filters\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 288,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-1 gap-4 md:grid-cols-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"w-28 text-sm text-gray-600\",\n                children: \"Date From\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 291,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"date\",\n                value: dateFrom,\n                onChange: e => setDateFrom(e.target.value),\n                className: \"w-full rounded-lg border p-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 292,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 290,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"w-28 text-sm text-gray-600\",\n                children: \"Date To\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 300,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"date\",\n                value: dateTo,\n                onChange: e => setDateTo(e.target.value),\n                className: \"w-full rounded-lg border p-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 301,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 299,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"mb-1 block text-sm text-gray-600\",\n                children: \"Departments\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 310,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex flex-wrap gap-2\",\n                children: DEPARTMENTS.map(d => /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"button\",\n                  onClick: () => toggleInArray(d, departments, setDepartments),\n                  className: `rounded-full border px-3 py-1 text-sm ${departments.includes(d) ? \"bg-indigo-600 text-white\" : \"bg-gray-50\"}`,\n                  children: d\n                }, d, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 315,\n                  columnNumber: 21\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 313,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 309,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"mb-1 block text-sm text-gray-600\",\n                children: \"Equipment Categories\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 332,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex flex-wrap gap-2\",\n                children: EQUIPMENT_CATEGORIES.map(c => /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"button\",\n                  onClick: () => toggleInArray(c, categories, setCategories),\n                  className: `rounded-full border px-3 py-1 text-sm ${categories.includes(c) ? \"bg-indigo-600 text-white\" : \"bg-gray-50\"}`,\n                  children: c\n                }, c, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 337,\n                  columnNumber: 21\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 335,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 331,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"md:col-span-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"mb-1 block text-sm text-gray-600\",\n                children: \"Filter by Staff (optional)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 354,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                value: staff,\n                onChange: e => setStaff(e.target.value),\n                placeholder: \"e.g., Eng. Mensah or Tech. Adwoa\",\n                className: \"w-full rounded-lg border p-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 357,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 353,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 289,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 287,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n          className: \"mb-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"mb-2 flex items-center gap-2 text-sm font-medium text-gray-700\",\n            children: [/*#__PURE__*/_jsxDEV(BarChart3, {\n              className: \"h-4 w-4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 371,\n              columnNumber: 15\n            }, this), \" Output Options\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 370,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-1 gap-4 md:grid-cols-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mb-1 text-sm text-gray-600\",\n                children: \"Format\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 375,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex flex-wrap gap-2\",\n                children: FORMATS.map(f => /*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"flex cursor-pointer items-center gap-2 rounded-lg border px-3 py-2 hover:bg-gray-50\",\n                  children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"radio\",\n                    name: \"format\",\n                    checked: format === f.key,\n                    onChange: () => setFormat(f.key)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 382,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: f.label\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 388,\n                    columnNumber: 23\n                  }, this)]\n                }, f.key, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 378,\n                  columnNumber: 21\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 376,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 374,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center justify-between rounded-xl border p-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-sm font-medium\",\n                  children: \"Include Charts\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 396,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-xs text-gray-500\",\n                  children: \"Pie, bar, trend lines in PDF/Excel\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 397,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 395,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Toggle, {\n                checked: includeCharts,\n                onChange: setIncludeCharts,\n                id: \"charts\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 401,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 394,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center justify-between rounded-xl border p-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-sm font-medium\",\n                  children: \"Include Auto Summary\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 406,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-xs text-gray-500\",\n                  children: \"One-paragraph insights at top\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 407,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 405,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Toggle, {\n                checked: includeSummary,\n                onChange: setIncludeSummary,\n                id: \"summary\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 411,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 404,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 373,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 369,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n          className: \"mb-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"mb-2 flex items-center gap-2 text-sm font-medium text-gray-700\",\n            children: [/*#__PURE__*/_jsxDEV(Settings, {\n              className: \"h-4 w-4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 419,\n              columnNumber: 15\n            }, this), \" Advanced Options\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 418,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-1 gap-4 md:grid-cols-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center justify-between rounded-xl border p-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-sm font-medium\",\n                  children: \"Interactive Dashboard Export\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 424,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-xs text-gray-500\",\n                  children: \"Enable drill-down in Excel/online\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 425,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 423,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Toggle, {\n                checked: interactiveExport,\n                onChange: setInteractiveExport,\n                id: \"interactive\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 429,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 422,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center justify-between rounded-xl border p-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-sm font-medium\",\n                  children: \"Trend Prediction\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 437,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-xs text-gray-500\",\n                  children: \"Flag likely-to-fail equipment\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 438,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 436,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Toggle, {\n                checked: trendPrediction,\n                onChange: setTrendPrediction,\n                id: \"prediction\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 442,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 435,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center justify-between rounded-xl border p-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-sm font-medium\",\n                  children: \"Heat Maps\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 450,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-xs text-gray-500\",\n                  children: \"Highlight heavy-load departments\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 451,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 449,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Toggle, {\n                checked: heatMaps,\n                onChange: setHeatMaps,\n                id: \"heatmaps\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 455,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 448,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 421,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 417,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n          className: \"mb-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"mb-2 flex items-center gap-2 text-sm font-medium text-gray-700\",\n            children: [/*#__PURE__*/_jsxDEV(Calendar, {\n              className: \"h-4 w-4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 463,\n              columnNumber: 15\n            }, this), \" Schedule & Delivery\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 462,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-1 gap-4 md:grid-cols-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center justify-between rounded-xl border p-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-sm font-medium\",\n                  children: \"Schedule\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 468,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-xs text-gray-500\",\n                  children: \"Email reports automatically\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 469,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 467,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Toggle, {\n                checked: scheduleEnabled,\n                onChange: setScheduleEnabled,\n                id: \"schedule\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 471,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 466,\n              columnNumber: 15\n            }, this), scheduleEnabled && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"w-28 text-sm text-gray-600\",\n                children: \"Frequency\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 480,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                value: scheduleFreq,\n                onChange: e => setScheduleFreq(e.target.value),\n                className: \"w-full rounded-lg border p-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"weekly\",\n                  children: \"Weekly\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 486,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"monthly\",\n                  children: \"Monthly\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 487,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"quarterly\",\n                  children: \"Quarterly\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 488,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 481,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 479,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center justify-between rounded-xl border p-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-sm font-medium\",\n                  children: \"Download Now\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 495,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-xs text-gray-500\",\n                  children: \"Save file to device\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 496,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 494,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Toggle, {\n                checked: deliveryNow,\n                onChange: setDeliveryNow,\n                id: \"downloadNow\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 498,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 493,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"w-28 text-sm text-gray-600\",\n                children: \"Email To\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 506,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"relative flex-1\",\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"email\",\n                  value: deliveryEmail,\n                  onChange: e => setDeliveryEmail(e.target.value),\n                  placeholder: \"e.g., admin@hospital.org\",\n                  className: \"w-full rounded-lg border p-2 pr-10\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 508,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Mail, {\n                  className: \"absolute right-2 top-2.5 h-5 w-5 text-gray-400\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 515,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 507,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 505,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 465,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 461,\n          columnNumber: 11\n        }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-4 rounded-lg border border-red-200 bg-red-50 p-3 text-sm text-red-800\",\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 523,\n          columnNumber: 13\n        }, this), successMsg && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-4 rounded-lg border border-emerald-200 bg-emerald-50 p-3 text-sm text-emerald-800\",\n          children: successMsg\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 528,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between gap-3 border-t p-5\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-xs text-gray-500\",\n          children: \"Your selections will generate consolidated reports per type with charts and summaries.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 536,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex gap-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => {\n              reset();\n              onClose === null || onClose === void 0 ? void 0 : onClose();\n            },\n            className: \"rounded-xl border px-4 py-2 text-sm hover:bg-gray-50\",\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 540,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleGenerate,\n            disabled: loading,\n            className: \"inline-flex items-center gap-2 rounded-xl bg-indigo-600 px-4 py-2 text-sm font-medium text-white shadow hover:bg-indigo-700 disabled:cursor-not-allowed disabled:opacity-60\",\n            children: [loading ? /*#__PURE__*/_jsxDEV(Loader2, {\n              className: \"h-4 w-4 animate-spin\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 555,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(Download, {\n              className: \"h-4 w-4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 557,\n              columnNumber: 17\n            }, this), loading ? \"Generating...\" : \"Generate\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 549,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 539,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 535,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 237,\n    columnNumber: 5\n  }, this);\n}\n_s(GenerateReportModal, \"VF0r9bDdLjrMpr+vqRxZhtAd6XM=\");\n_c2 = GenerateReportModal;\nvar _c, _c2;\n$RefreshReg$(_c, \"Toggle\");\n$RefreshReg$(_c2, \"GenerateReportModal\");","map":{"version":3,"names":["React","useMemo","useState","X","Download","Mail","Calendar","Loader2","Settings","BarChart3","FileText","api","jsxDEV","_jsxDEV","REPORT_TYPES","key","label","DEPARTMENTS","EQUIPMENT_CATEGORIES","FORMATS","Toggle","checked","onChange","id","type","onClick","className","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","GenerateReportModal","open","onClose","_s","today","Date","toISOString","slice","selectedReports","setSelectedReports","dateFrom","setDateFrom","dateTo","setDateTo","departments","setDepartments","categories","setCategories","staff","setStaff","format","setFormat","includeCharts","setIncludeCharts","includeSummary","setIncludeSummary","interactiveExport","setInteractiveExport","trendPrediction","setTrendPrediction","heatMaps","setHeatMaps","scheduleEnabled","setScheduleEnabled","scheduleFreq","setScheduleFreq","deliveryNow","setDeliveryNow","deliveryEmail","setDeliveryEmail","loading","setLoading","error","setError","successMsg","setSuccessMsg","reset","toggleInArray","value","arr","setter","includes","filter","v","handleGenerate","length","payload","reports","filters","undefined","options","visuals","charts","summary","advanced","schedule","enabled","frequency","delivery","downloadNow","email","response","post","responseType","headers","contentType","isJson","toLowerCase","text","data","json","JSON","parse","fileUrl","window","message","blob","url","URL","createObjectURL","a","document","createElement","ext","href","download","now","body","appendChild","click","remove","revokeObjectURL","prev","err","_err$response","_err$response$data","_err$response$data$te","_err$response2","_err$response2$data","call","_","_err$response3","_err$response3$data","map","r","e","target","d","c","placeholder","f","name","disabled","_c2","$RefreshReg$"],"sources":["C:/Users/USER/Desktop/servix-cmms/frontend/src/components/reports/GenerateReportModal.js"],"sourcesContent":["// frontend/src/components/reports/GenerateReportModal.js\r\nimport React, { useMemo, useState } from \"react\";\r\nimport {\r\n  X,\r\n  Download,\r\n  Mail,\r\n  Calendar,\r\n  Loader2,\r\n  Settings,\r\n  BarChart3,\r\n  FileText,\r\n} from \"lucide-react\";\r\nimport api from \"../../utils/api\"; // your axios instance (JWT is injected)\r\n\r\n// ------------------------------------\r\n// Lists / Options\r\n// ------------------------------------\r\nconst REPORT_TYPES = [\r\n  { key: \"equipmentStatus\", label: \"Equipment Status Report\" },\r\n  { key: \"taskManagement\", label: \"Task Management Report\" },\r\n  { key: \"preventiveVsCorrective\", label: \"Preventive vs Corrective Maintenance Report\" },\r\n  { key: \"staffPerformance\", label: \"Engineer & Technician Performance Report\" },\r\n  { key: \"inventorySpareParts\", label: \"Spare Parts & Inventory Report\" },\r\n  { key: \"downtimeAnalysis\", label: \"Downtime Analysis Report\" },\r\n  { key: \"financialCost\", label: \"Financial/Cost Report\" },\r\n  { key: \"complianceAudit\", label: \"Compliance & Audit Report\" },\r\n];\r\n\r\nconst DEPARTMENTS = [\r\n  \"ICU\", \"Theatre\", \"Radiology\", \"Physiotherapy\", \"Laboratory\", \"OPD\",\r\n  \"Maternity\", \"ENT\", \"Dental\", \"Eye\",\r\n];\r\n\r\nconst EQUIPMENT_CATEGORIES = [\r\n  \"Ventilator\", \"Defibrillator\", \"Monitor\", \"Infusion Pump\", \"Suction\",\r\n  \"Autoclave\", \"X-Ray\", \"Ultrasound\",\r\n];\r\n\r\nconst FORMATS = [\r\n  { key: \"pdf\", label: \"PDF (with charts)\" },\r\n  { key: \"xlsx\", label: \"Excel (editable)\" },\r\n  { key: \"docx\", label: \"Word (narrative)\" }, // server returns PDF for docx placeholder if not implemented\r\n];\r\n\r\n// ------------------------------------\r\n// Small toggle component\r\n// ------------------------------------\r\nfunction Toggle({ checked, onChange, id }) {\r\n  return (\r\n    <button\r\n      type=\"button\"\r\n      aria-pressed={checked}\r\n      onClick={() => onChange(!checked)}\r\n      className={`relative inline-flex h-6 w-11 items-center rounded-full transition ${\r\n        checked ? \"bg-indigo-600\" : \"bg-gray-300\"\r\n      }`}\r\n      id={id}\r\n    >\r\n      <span\r\n        className={`inline-block h-4 w-4 transform rounded-full bg-white transition ${\r\n          checked ? \"translate-x-6\" : \"translate-x-1\"\r\n        }`}\r\n      />\r\n    </button>\r\n  );\r\n}\r\n\r\n// ------------------------------------\r\n// Main modal\r\n// ------------------------------------\r\nexport default function GenerateReportModal({ open, onClose }) {\r\n  const today = useMemo(() => new Date().toISOString().slice(0, 10), []);\r\n\r\n  // ----- Form State -----\r\n  const [selectedReports, setSelectedReports] = useState([]);\r\n  const [dateFrom, setDateFrom] = useState(today);\r\n  const [dateTo, setDateTo] = useState(today);\r\n  const [departments, setDepartments] = useState([]);\r\n  const [categories, setCategories] = useState([]);\r\n  const [staff, setStaff] = useState(\"\");\r\n  const [format, setFormat] = useState(\"pdf\");\r\n\r\n  const [includeCharts, setIncludeCharts] = useState(true);\r\n  const [includeSummary, setIncludeSummary] = useState(true);\r\n\r\n  const [interactiveExport, setInteractiveExport] = useState(false);\r\n  const [trendPrediction, setTrendPrediction] = useState(false);\r\n  const [heatMaps, setHeatMaps] = useState(false);\r\n\r\n  const [scheduleEnabled, setScheduleEnabled] = useState(false);\r\n  const [scheduleFreq, setScheduleFreq] = useState(\"monthly\");\r\n  const [deliveryNow, setDeliveryNow] = useState(true);\r\n  const [deliveryEmail, setDeliveryEmail] = useState(\"\");\r\n\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n  const [successMsg, setSuccessMsg] = useState(\"\");\r\n\r\n  const reset = () => {\r\n    setSelectedReports([]);\r\n    setDateFrom(today);\r\n    setDateTo(today);\r\n    setDepartments([]);\r\n    setCategories([]);\r\n    setStaff(\"\");\r\n    setFormat(\"pdf\");\r\n    setIncludeCharts(true);\r\n    setIncludeSummary(true);\r\n    setInteractiveExport(false);\r\n    setTrendPrediction(false);\r\n    setHeatMaps(false);\r\n    setScheduleEnabled(false);\r\n    setScheduleFreq(\"monthly\");\r\n    setDeliveryNow(true);\r\n    setDeliveryEmail(\"\");\r\n    setLoading(false);\r\n    setError(\"\");\r\n    setSuccessMsg(\"\");\r\n  };\r\n\r\n  const toggleInArray = (value, arr, setter) => {\r\n    if (arr.includes(value)) setter(arr.filter((v) => v !== value));\r\n    else setter([...arr, value]);\r\n  };\r\n\r\n  // ------------------------------------\r\n  // Generate handler\r\n  // ------------------------------------\r\n  const handleGenerate = async () => {\r\n    setError(\"\");\r\n    setSuccessMsg(\"\");\r\n\r\n    if (selectedReports.length === 0) {\r\n      setError(\"Select at least one report type.\");\r\n      return;\r\n    }\r\n    if (new Date(dateFrom) > new Date(dateTo)) {\r\n      setError(\"Start date cannot be after end date.\");\r\n      return;\r\n    }\r\n    if (!deliveryNow && !deliveryEmail && !scheduleEnabled) {\r\n      setError(\"Choose ‘Download Now’, or provide an email, or enable Schedule.\");\r\n      return;\r\n    }\r\n\r\n    const payload = {\r\n      reports: selectedReports,\r\n      filters: {\r\n        dateFrom,\r\n        dateTo,\r\n        departments,\r\n        categories,\r\n        staff: staff || undefined,\r\n      },\r\n      options: {\r\n        format, // pdf | xlsx | docx\r\n        visuals: { charts: includeCharts, summary: includeSummary },\r\n        advanced: {\r\n          interactiveExport,\r\n          trendPrediction,\r\n          heatMaps,\r\n        },\r\n        schedule: scheduleEnabled\r\n          ? { enabled: true, frequency: scheduleFreq }\r\n          : { enabled: false },\r\n        delivery: { downloadNow: deliveryNow, email: deliveryEmail || undefined },\r\n      },\r\n    };\r\n\r\n    try {\r\n      setLoading(true);\r\n\r\n      // Ask backend to STREAM the file so the browser download starts immediately\r\n      const response = await api.post(\"/reports/generate\", payload, {\r\n        responseType: \"blob\",\r\n        headers: { \"x-return-blob\": \"1\" },\r\n      });\r\n\r\n      const contentType = response.headers[\"content-type\"];\r\n\r\n      // Some proxies set application/octet-stream; treat any non-JSON as file\r\n      const isJson =\r\n        contentType && contentType.toLowerCase().includes(\"application/json\");\r\n\r\n      if (isJson) {\r\n        // Convert the blob to text then JSON\r\n        const text = await response.data.text();\r\n        const json = JSON.parse(text);\r\n        if (json?.fileUrl) {\r\n          window.open(json.fileUrl, \"_blank\");\r\n          setSuccessMsg(\"Report is ready. Opened download link in a new tab.\");\r\n        } else {\r\n          setError(json?.message || \"Unexpected server response.\");\r\n        }\r\n      } else {\r\n        // Blob path — save file\r\n        const blob = response.data;\r\n        const url = window.URL.createObjectURL(blob);\r\n        const a = document.createElement(\"a\");\r\n        const ext =\r\n          format === \"xlsx\" ? \"xlsx\" : format === \"docx\" ? \"docx\" : \"pdf\";\r\n        a.href = url;\r\n        a.download = `cmms-report-${Date.now()}.${ext}`;\r\n        document.body.appendChild(a);\r\n        a.click();\r\n        a.remove();\r\n        window.URL.revokeObjectURL(url);\r\n        setSuccessMsg(\"Report downloaded successfully.\");\r\n      }\r\n\r\n      if (scheduleEnabled || (!deliveryNow && deliveryEmail)) {\r\n        setSuccessMsg((prev) => `${prev} Scheduled / email delivery configured.`);\r\n      }\r\n    } catch (err) {\r\n      try {\r\n        const text = await err?.response?.data?.text?.();\r\n        const json = text ? JSON.parse(text) : null;\r\n        setError(\r\n          json?.message ||\r\n            err?.response?.data?.message ||\r\n            err.message ||\r\n            \"Failed to generate report.\"\r\n        );\r\n      } catch (_) {\r\n        setError(\r\n          err?.response?.data?.message || err.message || \"Failed to generate report.\"\r\n        );\r\n      }\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  if (!open) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center\">\r\n      {/* Backdrop */}\r\n      <div className=\"absolute inset-0 bg-black/40\" onClick={onClose} />\r\n\r\n      {/* Modal */}\r\n      <div className=\"relative w-full max-w-4xl rounded-2xl bg-white shadow-2xl ring-1 ring-black/5\">\r\n        {/* Header */}\r\n        <div className=\"flex items-center justify-between border-b p-5\">\r\n          <div className=\"flex items-center gap-2\">\r\n            <FileText className=\"h-5 w-5\" />\r\n            <h2 className=\"text-lg font-semibold\">Generate Report</h2>\r\n          </div>\r\n          <button\r\n            onClick={() => {\r\n              reset();\r\n              onClose?.();\r\n            }}\r\n            className=\"rounded-full p-2 hover:bg-gray-100\"\r\n            aria-label=\"Close\"\r\n          >\r\n            <X className=\"h-5 w-5\" />\r\n          </button>\r\n        </div>\r\n\r\n        {/* Body */}\r\n        <div className=\"max-h-[75vh] overflow-y-auto p-5\">\r\n          {/* Report Types */}\r\n          <section className=\"mb-6\">\r\n            <h3 className=\"mb-2 text-sm font-medium text-gray-700\">Report Types</h3>\r\n            <div className=\"grid grid-cols-1 gap-2 sm:grid-cols-2\">\r\n              {REPORT_TYPES.map((r) => (\r\n                <label\r\n                  key={r.key}\r\n                  className=\"flex cursor-pointer items-center gap-3 rounded-xl border p-3 hover:bg-gray-50\"\r\n                >\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    checked={selectedReports.includes(r.key)}\r\n                    onChange={() =>\r\n                      toggleInArray(r.key, selectedReports, setSelectedReports)\r\n                    }\r\n                    className=\"h-4 w-4\"\r\n                  />\r\n                  <span>{r.label}</span>\r\n                </label>\r\n              ))}\r\n            </div>\r\n          </section>\r\n\r\n          {/* Filters */}\r\n          <section className=\"mb-6\">\r\n            <h3 className=\"mb-2 text-sm font-medium text-gray-700\">Filters</h3>\r\n            <div className=\"grid grid-cols-1 gap-4 md:grid-cols-2\">\r\n              <div className=\"flex items-center gap-2\">\r\n                <label className=\"w-28 text-sm text-gray-600\">Date From</label>\r\n                <input\r\n                  type=\"date\"\r\n                  value={dateFrom}\r\n                  onChange={(e) => setDateFrom(e.target.value)}\r\n                  className=\"w-full rounded-lg border p-2\"\r\n                />\r\n              </div>\r\n              <div className=\"flex items-center gap-2\">\r\n                <label className=\"w-28 text-sm text-gray-600\">Date To</label>\r\n                <input\r\n                  type=\"date\"\r\n                  value={dateTo}\r\n                  onChange={(e) => setDateTo(e.target.value)}\r\n                  className=\"w-full rounded-lg border p-2\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"mb-1 block text-sm text-gray-600\">\r\n                  Departments\r\n                </label>\r\n                <div className=\"flex flex-wrap gap-2\">\r\n                  {DEPARTMENTS.map((d) => (\r\n                    <button\r\n                      type=\"button\"\r\n                      key={d}\r\n                      onClick={() => toggleInArray(d, departments, setDepartments)}\r\n                      className={`rounded-full border px-3 py-1 text-sm ${\r\n                        departments.includes(d)\r\n                          ? \"bg-indigo-600 text-white\"\r\n                          : \"bg-gray-50\"\r\n                      }`}\r\n                    >\r\n                      {d}\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"mb-1 block text-sm text-gray-600\">\r\n                  Equipment Categories\r\n                </label>\r\n                <div className=\"flex flex-wrap gap-2\">\r\n                  {EQUIPMENT_CATEGORIES.map((c) => (\r\n                    <button\r\n                      type=\"button\"\r\n                      key={c}\r\n                      onClick={() => toggleInArray(c, categories, setCategories)}\r\n                      className={`rounded-full border px-3 py-1 text-sm ${\r\n                        categories.includes(c)\r\n                          ? \"bg-indigo-600 text-white\"\r\n                          : \"bg-gray-50\"\r\n                      }`}\r\n                    >\r\n                      {c}\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"md:col-span-2\">\r\n                <label className=\"mb-1 block text-sm text-gray-600\">\r\n                  Filter by Staff (optional)\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={staff}\r\n                  onChange={(e) => setStaff(e.target.value)}\r\n                  placeholder=\"e.g., Eng. Mensah or Tech. Adwoa\"\r\n                  className=\"w-full rounded-lg border p-2\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </section>\r\n\r\n          {/* Output Options */}\r\n          <section className=\"mb-6\">\r\n            <h3 className=\"mb-2 flex items-center gap-2 text-sm font-medium text-gray-700\">\r\n              <BarChart3 className=\"h-4 w-4\" /> Output Options\r\n            </h3>\r\n            <div className=\"grid grid-cols-1 gap-4 md:grid-cols-2\">\r\n              <div>\r\n                <div className=\"mb-1 text-sm text-gray-600\">Format</div>\r\n                <div className=\"flex flex-wrap gap-2\">\r\n                  {FORMATS.map((f) => (\r\n                    <label\r\n                      key={f.key}\r\n                      className=\"flex cursor-pointer items-center gap-2 rounded-lg border px-3 py-2 hover:bg-gray-50\"\r\n                    >\r\n                      <input\r\n                        type=\"radio\"\r\n                        name=\"format\"\r\n                        checked={format === f.key}\r\n                        onChange={() => setFormat(f.key)}\r\n                      />\r\n                      <span>{f.label}</span>\r\n                    </label>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"flex items-center justify-between rounded-xl border p-3\">\r\n                <div>\r\n                  <div className=\"text-sm font-medium\">Include Charts</div>\r\n                  <div className=\"text-xs text-gray-500\">\r\n                    Pie, bar, trend lines in PDF/Excel\r\n                  </div>\r\n                </div>\r\n                <Toggle checked={includeCharts} onChange={setIncludeCharts} id=\"charts\" />\r\n              </div>\r\n\r\n              <div className=\"flex items-center justify-between rounded-xl border p-3\">\r\n                <div>\r\n                  <div className=\"text-sm font-medium\">Include Auto Summary</div>\r\n                  <div className=\"text-xs text-gray-500\">\r\n                    One-paragraph insights at top\r\n                  </div>\r\n                </div>\r\n                <Toggle checked={includeSummary} onChange={setIncludeSummary} id=\"summary\" />\r\n              </div>\r\n            </div>\r\n          </section>\r\n\r\n          {/* Advanced Options */}\r\n          <section className=\"mb-6\">\r\n            <h3 className=\"mb-2 flex items-center gap-2 text-sm font-medium text-gray-700\">\r\n              <Settings className=\"h-4 w-4\" /> Advanced Options\r\n            </h3>\r\n            <div className=\"grid grid-cols-1 gap-4 md:grid-cols-2\">\r\n              <div className=\"flex items-center justify-between rounded-xl border p-3\">\r\n                <div>\r\n                  <div className=\"text-sm font-medium\">Interactive Dashboard Export</div>\r\n                  <div className=\"text-xs text-gray-500\">\r\n                    Enable drill-down in Excel/online\r\n                  </div>\r\n                </div>\r\n                <Toggle\r\n                  checked={interactiveExport}\r\n                  onChange={setInteractiveExport}\r\n                  id=\"interactive\"\r\n                />\r\n              </div>\r\n              <div className=\"flex items-center justify-between rounded-xl border p-3\">\r\n                <div>\r\n                  <div className=\"text-sm font-medium\">Trend Prediction</div>\r\n                  <div className=\"text-xs text-gray-500\">\r\n                    Flag likely-to-fail equipment\r\n                  </div>\r\n                </div>\r\n                <Toggle\r\n                  checked={trendPrediction}\r\n                  onChange={setTrendPrediction}\r\n                  id=\"prediction\"\r\n                />\r\n              </div>\r\n              <div className=\"flex items-center justify-between rounded-xl border p-3\">\r\n                <div>\r\n                  <div className=\"text-sm font-medium\">Heat Maps</div>\r\n                  <div className=\"text-xs text-gray-500\">\r\n                    Highlight heavy-load departments\r\n                  </div>\r\n                </div>\r\n                <Toggle checked={heatMaps} onChange={setHeatMaps} id=\"heatmaps\" />\r\n              </div>\r\n            </div>\r\n          </section>\r\n\r\n          {/* Schedule & Delivery */}\r\n          <section className=\"mb-2\">\r\n            <h3 className=\"mb-2 flex items-center gap-2 text-sm font-medium text-gray-700\">\r\n              <Calendar className=\"h-4 w-4\" /> Schedule & Delivery\r\n            </h3>\r\n            <div className=\"grid grid-cols-1 gap-4 md:grid-cols-2\">\r\n              <div className=\"flex items-center justify-between rounded-xl border p-3\">\r\n                <div>\r\n                  <div className=\"text-sm font-medium\">Schedule</div>\r\n                  <div className=\"text-xs text-gray-500\">Email reports automatically</div>\r\n                </div>\r\n                <Toggle\r\n                  checked={scheduleEnabled}\r\n                  onChange={setScheduleEnabled}\r\n                  id=\"schedule\"\r\n                />\r\n              </div>\r\n\r\n              {scheduleEnabled && (\r\n                <div className=\"flex items-center gap-2\">\r\n                  <label className=\"w-28 text-sm text-gray-600\">Frequency</label>\r\n                  <select\r\n                    value={scheduleFreq}\r\n                    onChange={(e) => setScheduleFreq(e.target.value)}\r\n                    className=\"w-full rounded-lg border p-2\"\r\n                  >\r\n                    <option value=\"weekly\">Weekly</option>\r\n                    <option value=\"monthly\">Monthly</option>\r\n                    <option value=\"quarterly\">Quarterly</option>\r\n                  </select>\r\n                </div>\r\n              )}\r\n\r\n              <div className=\"flex items-center justify-between rounded-xl border p-3\">\r\n                <div>\r\n                  <div className=\"text-sm font-medium\">Download Now</div>\r\n                  <div className=\"text-xs text-gray-500\">Save file to device</div>\r\n                </div>\r\n                <Toggle\r\n                  checked={deliveryNow}\r\n                  onChange={setDeliveryNow}\r\n                  id=\"downloadNow\"\r\n                />\r\n              </div>\r\n\r\n              <div className=\"flex items-center gap-2\">\r\n                <label className=\"w-28 text-sm text-gray-600\">Email To</label>\r\n                <div className=\"relative flex-1\">\r\n                  <input\r\n                    type=\"email\"\r\n                    value={deliveryEmail}\r\n                    onChange={(e) => setDeliveryEmail(e.target.value)}\r\n                    placeholder=\"e.g., admin@hospital.org\"\r\n                    className=\"w-full rounded-lg border p-2 pr-10\"\r\n                  />\r\n                  <Mail className=\"absolute right-2 top-2.5 h-5 w-5 text-gray-400\" />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </section>\r\n\r\n          {/* Errors / Success */}\r\n          {error && (\r\n            <div className=\"mt-4 rounded-lg border border-red-200 bg-red-50 p-3 text-sm text-red-800\">\r\n              {error}\r\n            </div>\r\n          )}\r\n          {successMsg && (\r\n            <div className=\"mt-4 rounded-lg border border-emerald-200 bg-emerald-50 p-3 text-sm text-emerald-800\">\r\n              {successMsg}\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Footer */}\r\n        <div className=\"flex items-center justify-between gap-3 border-t p-5\">\r\n          <div className=\"text-xs text-gray-500\">\r\n            Your selections will generate consolidated reports per type with charts and summaries.\r\n          </div>\r\n          <div className=\"flex gap-3\">\r\n            <button\r\n              onClick={() => {\r\n                reset();\r\n                onClose?.();\r\n              }}\r\n              className=\"rounded-xl border px-4 py-2 text-sm hover:bg-gray-50\"\r\n            >\r\n              Cancel\r\n            </button>\r\n            <button\r\n              onClick={handleGenerate}\r\n              disabled={loading}\r\n              className=\"inline-flex items-center gap-2 rounded-xl bg-indigo-600 px-4 py-2 text-sm font-medium text-white shadow hover:bg-indigo-700 disabled:cursor-not-allowed disabled:opacity-60\"\r\n            >\r\n              {loading ? (\r\n                <Loader2 className=\"h-4 w-4 animate-spin\" />\r\n              ) : (\r\n                <Download className=\"h-4 w-4\" />\r\n              )}\r\n              {loading ? \"Generating...\" : \"Generate\"}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}